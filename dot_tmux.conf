##### Fast + sane defaults #####

# Make Esc / vi feel snappy
set -s escape-time 1

# Start windows/panes at 1
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

# Mouse support (pane resize/select, scrollback in copy-mode)
set -g mouse on

# 256 color + truecolor where possible
set -g default-terminal "tmux-256color"
set -as terminal-overrides ",xterm-256color:Tc"
set -as terminal-overrides ",screen-256color:Tc"
set -as terminal-overrides ",*:Smulx=\E[4::%p1%dm"
set -as terminal-overrides ",*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%dm"

# Slightly nicer key repeat behavior
set -g repeat-time 300

# Splits/windows inherit current working directory
unbind c
bind c new-window -c "#{pane_current_path}"
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# Copy-mode: yank to clipboard (mac + linux fallbacks)
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "if command -v pbcopy >/dev/null 2>&1; then pbcopy; elif command -v xclip >/dev/null 2>&1; then xclip -in -selection clipboard; elif command -v wl-copy >/dev/null 2>&1; then wl-copy; else cat >/dev/null; fi"

# Vi keys in copy-mode
setw -g mode-keys vi

# Helpful: larger scrollback history
set -g history-limit 200000

# Helpful: allow programs to update tmux clipboard (and tmux to update system clipboard)
# (supported in newer tmux; harmless if ignored)
set -g set-clipboard on

# Helpful: show window activity
setw -g monitor-activity on
setw -g visual-activity on

# Helpful: visually show pane titles, etc.
set -g display-time 1500


##### Keybinds (starter pack) #####

# Reload tmux config quickly
unbind r
bind r source-file ~/.tmux.conf \; display-message "Reloaded ~/.tmux.conf ⚡"

# Split panes (easier than remembering % and ")
bind | split-window -h
bind - split-window -v

# Keep your vim-ish pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize with shift + hjkl (your existing behavior)
bind H resize-pane -L 5
bind J resize-pane -D 5
bind K resize-pane -U 5
bind L resize-pane -R 5


##### Copy-mode + macOS clipboard #####

# IMPORTANT: don’t bind bare Escape to enter copy-mode — it makes it hard to exit.
# Use prefix + [ (tmux default) to enter copy-mode.
unbind Escape

# Selection controls (vi)
bind -T copy-mode-vi v send -X begin-selection

# Yank to macOS system clipboard + exit copy-mode
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"

# Paste (keep your preference: plain 'p' pastes tmux buffer)
unbind p
bind p paste-buffer


# Palette reference:
# - bg: colour233/234 (near-black)
# - neon cyan: colour45
# - neon pink: colour198
# - neon purple: colour141
# - neon green: colour118
# - muted text: colour250 / 246

# Neon borders
setw -g pane-border-lines single
set -g pane-border-indicators arrows
setw -g pane-border-style "fg=colour141,bg=default"        # purple
setw -g pane-active-border-style "fg=colour45,bg=default"  # cyan

# Pane title bar at top (you already liked this)
set -g pane-border-status top
set -g pane-border-format "#[fg=colour45]#[bold]P#{pane_index} #[fg=colour246]#{pane_title}"

# Window background
set -g window-style "fg=colour250,bg=colour233"
set -g window-active-style "fg=colour255,bg=colour234"

# Messages
set -g message-style "fg=colour233,bg=colour45,bold"
set -g message-command-style "fg=colour233,bg=colour198,bold"

# Status bar
set -g status on
set -g status-interval 2
set -g status-style "fg=colour250,bg=colour233"
set -g status-left-length 80
set -g status-right-length 80

# Window list
setw -g window-status-style "fg=colour246,bg=colour233"
setw -g window-status-current-style "fg=colour233,bg=colour198,bold"
setw -g window-status-activity-style "fg=colour233,bg=colour118,bold"

# Left: neon “tag”
set -g status-left "#[fg=colour233,bg=colour45,bold] ⚡ #S #[fg=colour45,bg=colour233]▌#[fg=colour45] w:#I #[fg=colour118]p:#P #[default]"

# Right: host + time/date (ASCII separators)
set -g status-right "#[fg=colour141]#H#[fg=colour45] :: #[fg=colour250]%H:%M#[fg=colour198] • #[fg=colour250]%Y-%m-%d"

